<title>ALLNet Billing — a Documentation</title>
{"created":"20240712071032641","creator":"allnetteam","title":"$:/config/NewTiddler/Tags","text":"pppoe hotspot radius [[radius rest]]","modified":"20240712071044726","modifier":"allnetteam"},
{"created":"20240712071219925","creator":"allnetteam","text":"show","title":"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/close-all","modified":"20240712071219925","modifier":"allnetteam"},
{"created":"20240712071216809","creator":"allnetteam","text":"show","title":"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/home","modified":"20240712071216809","modifier":"allnetteam"},
{"created":"20240712071227759","creator":"allnetteam","text":"hide","title":"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/new-tiddler","modified":"20240712071227759","modifier":"allnetteam"},
{"created":"20240712071844604","creator":"allnetteam","text":"hide","title":"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/save-wiki","modified":"20240712071844604","modifier":"allnetteam"},
{"created":"20240712071245775","creator":"allnetteam","text":"hide","title":"$:/config/PageControlButtons/Visibility/$:/core/ui/Buttons/tag-manager","modified":"20240712071248191","modifier":"allnetteam"},
{"created":"20241105022510896","creator":"allnetteam","text":"yes","title":"$:/config/TextEditor/EnableToolbar","modified":"20250211062320861","modifier":"allnetteam"},
{"created":"20240714053902903","creator":"allnetteam","title":"$:/DefaultTiddlers","text":"GettingStarted","modified":"20240714055036560","modifier":"allnetteam"},
{"created":"20240712071016371","creator":"allnetteam","title":"$:/language/DefaultNewTiddlerTitle","text":"New Wiki","modified":"20240712071016902","modifier":"allnetteam"},
{"created":"20240712071303710","creator":"allnetteam","title":"$:/layout","text":"$:/core/ui/PageTemplate","modified":"20250211062342745","modifier":"allnetteam"},
{"created":"20240712071107711","creator":"allnetteam","title":"$:/palette","text":"$:/palettes/Vanilla","modified":"20240712071136757","modifier":"allnetteam"},
{"created":"20240712070927612","title":"$:/SiteTitle","text":"ALLNet Billing","modified":"20240712070930402"},
{"created":"20240714054039193","creator":"allnetteam","title":"$:/state/add-plugin-info/$:/temp/ServerConnection/https://tiddlywiki.com/library/v5.3.5/index.html/$:/temp/RemoteAssetInfo/https://tiddlywiki.com/library/v5.3.5/index.html/$:/plugins/tiddlywiki/comments","text":"no","modified":"20240714054046493","modifier":"allnetteam"},
{"created":"20240714054125859","creator":"allnetteam","title":"$:/state/add-plugin-info/$:/temp/ServerConnection/https://tiddlywiki.com/library/v5.3.5/index.html/$:/temp/RemoteAssetInfo/https://tiddlywiki.com/library/v5.3.5/index.html/$:/plugins/tiddlywiki/menubar","text":"yes","modified":"20240714054125859","modifier":"allnetteam"},
{"created":"20240714054141893","creator":"allnetteam","title":"$:/state/add-plugin-info/$:/temp/ServerConnection/https://tiddlywiki.com/library/v5.3.5/index.html/$:/temp/RemoteAssetInfo/https://tiddlywiki.com/library/v5.3.5/index.html/$:/plugins/tiddlywiki/railroad","text":"yes","modified":"20240714054141893","modifier":"allnetteam"},
{"created":"20240714054206877","creator":"allnetteam","title":"$:/state/add-plugin-info/$:/temp/ServerConnection/https://tiddlywiki.com/library/v5.3.5/index.html/$:/temp/RemoteAssetInfo/https://tiddlywiki.com/library/v5.3.5/index.html/$:/themes/tiddlywiki/centralised","text":"yes","modified":"20240714054206877","modifier":"allnetteam"},
{"created":"20240712071434480","creator":"allnetteam","title":"$:/state/add-plugin-info/$:/temp/ServerConnection/https://tiddlywiki.com/library/v5.3.5/index.html/$:/temp/RemoteAssetInfo/https://tiddlywiki.com/library/v5.3.5/index.html/$:/themes/tiddlywiki/readonly","text":"yes","modified":"20240712071457586","modifier":"allnetteam"},
{"created":"20240712084513995","creator":"allnetteam","text":"hide","title":"$:/state/image-picker/system--1059320382","modified":"20240712084516212","modifier":"allnetteam"},
{"created":"20250311074716889","creator":"allnetteam","title":"$:/state/Link/-1351937260/search","text":"https://insomnia.rest/","modified":"20250311074716889","modifier":"allnetteam"},
{"created":"20250218074756042","creator":"allnetteam","title":"$:/state/Link/-741163119/search","text":"","modified":"20250218074758107","modifier":"allnetteam"},
{"created":"20250211062236312","creator":"allnetteam","title":"$:/state/plugin-info-1867135918-$:/core","text":"no","modified":"20250211062237011","modifier":"allnetteam"},
{"created":"20240712071523556","creator":"allnetteam","title":"$:/state/plugin-info-2003269606-$:/themes/tiddlywiki/readonly","text":"yes","modified":"20240712071523556","modifier":"allnetteam"},
{"created":"20240712072611765","creator":"allnetteam","title":"$:/state/showeditpreview","text":"yes","modified":"20240712080733593","modifier":"allnetteam"},
{"created":"20240712084615928","creator":"allnetteam","title":"$:/state/sidebar","text":"yes","modified":"20240712084616964","modifier":"allnetteam"},
{"created":"20240712071101275","creator":"allnetteam","title":"$:/state/tab--1963855381","text":"$:/core/ui/ControlPanel/Theme","modified":"20250211062358600","modifier":"allnetteam"},
{"created":"20240712071953670","creator":"allnetteam","title":"$:/state/tab--2112689675","text":"$:/core/ui/ControlPanel/Basics","modified":"20240714055031500","modifier":"allnetteam"},
{"created":"20240712071508055","creator":"allnetteam","title":"$:/state/tab--86143343","text":"$:/core/ui/ControlPanel/Plugins/Installed/Plugins","modified":"20240714054016960","modifier":"allnetteam"},
{"created":"20240712071959188","creator":"allnetteam","title":"$:/state/tab--959111941","text":"$:/core/ui/ControlPanel/Cascades","modified":"20240712072006234","modifier":"allnetteam"},
{"created":"20240712071430172","creator":"allnetteam","title":"$:/state/tab-1188684346","text":"$:/core/ui/ControlPanel/Plugins/Add/Languages","modified":"20240714054218978","modifier":"allnetteam"},
{"created":"20240712071056489","creator":"allnetteam","title":"$:/state/tab-1749438307","text":"$:/core/ui/ControlPanel/Appearance","modified":"20250211062355762","modifier":"allnetteam"},
{"created":"20240712071355683","creator":"allnetteam","title":"$:/state/tab-2065006209","text":"$:/core/ui/ControlPanel/Saving/GitHub","modified":"20240712071355683","modifier":"allnetteam"},
{"created":"20240714054515997","creator":"allnetteam","title":"$:/state/tab/moresidebar-1850697562","text":"$:/core/ui/MoreSideBar/All","modified":"20240714054526596","modifier":"allnetteam"},
{"created":"20240712071325438","creator":"allnetteam","title":"$:/state/tab/sidebar--595412856","text":"$:/core/ui/SideBar/Open","modified":"20240714054527762","modifier":"allnetteam"},
{"created":"20240712071211426","creator":"allnetteam","title":"$:/state/tabs/controlpanel/toolbars-1345989671","text":"$:/core/ui/ControlPanel/Toolbars/ViewToolbar","modified":"20250211062334510","modifier":"allnetteam"},
{"created":"20240712071004482","creator":"i","title":"$:/status/UserName","text":"allnetteam","modified":"20240712071005201","modifier":"allnetteam"},
{"title":"$:/StoryList","created":"20250317074031413","creator":"allnetteam","text":"","list":"GettingStarted [[Reminder with payment link]]","modified":"20250317074031413","modifier":"allnetteam"},
{"created":"20240712071159691","creator":"allnetteam","title":"$:/theme","text":"$:/themes/tiddlywiki/snowwhite","modified":"20250218074405827","modifier":"allnetteam"},
{"created":"20240712073733982","creator":"allnetteam","title":"$:/themes/tiddlywiki/vanilla/options/sidebarlayout","text":"fluid-fixed","modified":"20240712073733982","modifier":"allnetteam"},
{"created":"20240713151427604","creator":"allnetteam","title":"$:/themes/tiddlywiki/vanilla/options/stickytitles","text":"yes","modified":"20240713151427604","modifier":"allnetteam"},
{"created":"20240712071148411","creator":"allnetteam","title":"$:/view","text":"classic","modified":"20240712073544309","modifier":"allnetteam"},
{"created":"20240712102613374","creator":"allnetteam","text":"If You are not using Radius, then you need Mikrotik.\n\nNow [ext[Add your Mikrotik|../?_route=routers/list]] to ALLNet Billing.\n\n''Mikrotik Name'' is a Location Name, Customer will see it and know where they are connected.\n\n\u003C\u003C\u003C\nExample: My Cafetaria\n\u003C\u003C\u003C\n\n''IP Address'' is Your Mikrotik IP, ALLNet Billing will use default API Port 8728, if you have custom port then add it with colon as divider, example `192.168.88.1:7282`\n\n''Username'' and ''Password'' is credentials to access your Mikrotik, better create new user.\n\n''Description'' is to describe where your Internet Location available, \n\n\u003C\u003C\u003C\nexample : Location at My Cafetaria up to 3rd floor\n\u003C\u003C\u003C\n\n\ncheck Test Connection if needed\n\nNext:\n\n* Hotspot System \u003Cbutton>[[Create Bandwidth Plan]]\u003C/button>\n* \u003Cbutton>[[Create Pool]]\u003C/button> if PPPOE System","title":"Add Mikrotik","modified":"20240714055512322","modifier":"allnetteam"},
{"created":"20240713054857680","creator":"allnetteam","text":"! Network Access Server\n\nNAS are Mikrotik or maybe other devices which support Radius, used for Radius System with Mysql.\n\n1 NAS can be used for multiple Mikrotik\n\n[ext[Add your NAS|../?_route=radius/nas-list]] to ALLNet Billing\n\n* ''Router Name ''is Area where (multiple) Mikrotik operated\n\n\u003C\u003C\u003C\nExample: My Cafetaria\n\u003C\u003C\u003C\n\n* ''IP Address'' can be single IP or range, using Range if you want multiple Mikrotik in one NAS\n\n\u003C\u003C\u003C\n`192.168.88.1` or `192.168.89.0/24` or `0.0.0.0/0`\n\u003C\u003C\u003C\n\n* ''Secret'' are the password you set, and configure it with Mikrotik\n* ''Description''  is to describe where your Internet Location available\n\n\u003C\u003C\u003C\nexample : Location at My Cafetaria up to 3rd floor\n\u003C\u003C\u003C\n\n\nothers i don't understand, my be you do.\n\nEverytime you add NAS, you need to restart Freeradius Services\n\n\nNext \n\n* Hotspot System \u003Cbutton>[[Create Bandwidth Plan]]\u003C/button>\n* \u003Cbutton>[[Create Pool]]\u003C/button> if PPPOE System","title":"Add NAS","modified":"20240714055458620","modifier":"allnetteam"},
{"created":"20240715063725419","creator":"allnetteam","text":"Sometime you need to add Additional Billing, if you lend a router or access point, and it have different billing.\n\n* [ext[Edit Customer|../index.php?_route=customers]]\n* In the ''Attributes'' section, add additional attributes\n\nany attribute end with ''Bill'' will be added when customer pay for internet, example: ''Router Bill''.\n\nAdd value with price, example : ''1000'', everytime customer pay Internet, 1000 will be add as additional payment. if you want recurring for only 12 Months, add colon after price, example: ''1000:12'', additional price will be added for 12 times, change it to another number if you have different recurring payment. 12 will be decrease until 0. if system detect '':0'', it will stop add additional payment\n\n","title":"Additional Billing","modified":"20240715065105986","modifier":"allnetteam"},
{"created":"20250311074312954","creator":"allnetteam","text":"i don't create new API services, i just using existing logic and process it as an API, there's no complete Documentation.\n\nTo use API, you just need access it from `system/api.php`\n\ndesktop version: `http://domain/?_route=customers/list`\n\nAPI version: `http://domain/system/api.php?r=customers/list`\n\nyou just need change `?_route=` to `?r=`\n\nto see what data need to send, see .tpl file\n\ni don't use Postman, i use [[Insomnia.rest|https://insomnia.rest/]], download it then import this file [ext[insomnia.rest.json|./insomnia.rest.json]]","title":"API Rest Documentation","modified":"20250311074941518","modifier":"allnetteam"},
{"created":"20240712104547248","creator":"allnetteam","text":"Bandwidth is to limit your customers internet speed. you need to specify Bandwidth limit for every internet plan. 1 Bandwidth Plan can be used for multiple Internet Plan.\n\nNow [ext[Create Bandwidth Plan|../?_route=bandwidth/list]].\n\n''Upload'' and ''Download'' Limit is required.\n\nBurst is Optional, you need to understand how burst works, you can search for Burst Calculator in the Internet, or in the [[Mikrotik Page|https://help.mikrotik.com/docs/display/ROS/Queue+Burst]].\n\nNext\n\n\u003Cbutton>[[Create Hotspot Plan]]\u003C/button>\n\u003Cbutton>[[Create PPPOE Plan]]\u003C/button>\n","title":"Create Bandwidth Plan","modified":"20240713061927065","modifier":"allnetteam"},
{"created":"20240712105508771","creator":"allnetteam","text":"Hotspot Plan is the Internet Plan you sell to customer.\n\n* ''Status'' is where you can enable or disable Internet Plan, Admin can activate the Internet Plan, but Customer cannot buy it, it will not show in the order page Customer, Customer can recharge it.\n* ''Type'' is to set is Prepaid Plan or Postpaid Plan. if it PostPaid, it will only have Period Validity and fix expired date.\n* ''Plan Type '' is to set wether Internet Plan for Personal Customer or Business Customer\n* ''Radius'' is this Plan for radius system then check it\n* ''Device'' is the logic how ALLNet Billing Talk to Mikrotik or Radius or other Device. Choose wisely, Hotspot plan choose the Hotspot Device, or Radius if it Radius Plan.\n\n** ''Dummy'' will not do anything, some user just need ALLNet Billing just for tracking sales.\n** ''MikrotikHotspot'' for Hotspot Plan\n** ''MikrotikPppoe'' for PPPOE Plan\n** ''Radius'' for [[Radius System with Mysql]]\n** ''RadiusRest'' for [[Integrated Radius System]]\n\n* ''Plan Type'' you can choose how you limit your customer, is Unlimited, or Data Limited or Time Limited or Data and Time Limited.\n\u003C\u003C\u003C\nFor Time Limited, your Plan Validity need more bigger dan Time Limit\n\nIf Time Limit 6 Hours and Plan Validity 1 Day, in 1 day customer only can use internet for 6 Hours, after 1 day it will expired even if customer only use 1 Hour, but if customer use all 6 hours, Mikrotik will decline login as it has reach limit, but ALLNet Billing will expired it after 1 day.\n\nThis 1 day count after activation, or first login for [[Integrated Radius System]]\n\u003C\u003C\u003C\n\n\u003C\u003C\u003C\nFor Data Limit is quota based Internet\n\u003C\u003C\u003C\n\n* ''Bandwidth Name'' is your Bandwidth Plan for Internet Plan\n* ''Shared Users'' 1 account can be used for how many devices can be online\n* ''Plan Validity'' How long Plan will be expired?\n* ''Router Name'' if it not Radius, you must select which Mikrotik will have this Hotspot Plan\n\nAfter you save it, you can customize another options\n\n* ''Expired Internet Plan'', if customer plan expired, it will move to this plan, you need to create Expired plan first, and the expired plan set expired plan to expired plan too. //''Default''// just remove the customer from Mikrotik.\n* ''on-login / on-up'' is helper to add custome script to Mikrotik\n* ''on-logout / on-down'' is helper to add custome script to Mikrotik\n\n\u003Cbutton>[[Back|Hotspot System]]\u003C/button>","title":"Create Hotspot Plan","modified":"20240715042745349","modifier":"allnetteam"},
{"created":"20240715042750725","creator":"allnetteam","text":"Hotspot Plan is the Internet Plan you sell to customer.\n\n* ''Status'' is where you can enable or disable Internet Plan, Admin can activate the Internet Plan, but Customer cannot buy it, it will not show in the order page Customer, Customer can recharge it.\n* ''Type'' is to set is Prepaid Plan or Postpaid Plan. if it PostPaid, it will only have Period Validity and fix expired date.\n* ''Plan Type '' is to set wether Internet Plan for Personal Customer or Business Customer\n* ''Radius'' is this Plan for radius system then check it\n* ''Device'' is the logic how ALLNet Billing Talk to Mikrotik or Radius or other Device. Choose wisely, Hotspot plan choose the Hotspot Device, or Radius if it Radius Plan.\n\n** ''Dummy'' will not do anything, some user just need ALLNet Billing just for tracking sales.\n** ''MikrotikHotspot'' for Hotspot Plan\n** ''MikrotikPppoe'' for PPPOE Plan\n** ''Radius'' for [[Radius System with Mysql]]\n** ''RadiusRest'' for [[Integrated Radius System]]\n* ''Bandwidth Name'' is your Bandwidth Plan for Internet Plan\n* ''Shared Users'' 1 account can be used for how many devices can be online\n* ''Plan Validity'' How long Plan will be expired?\n* ''Router Name'' if it not Radius, you must select which Mikrotik will have this Hotspot Plan\n* ''IP Pool'' is [ext[IP Pool|../?_route=pool/list]] you created before. \n\nAfter you save it, you can customize another options\n\n* ''Expired Internet Plan'', if customer plan expired, it will move to this plan, you need to create Expired plan first, and the expired plan set expired plan to expired plan too. //''Default''// just remove the customer from Mikrotik.\n* ''on-login / on-up'' is helper to add custome script to Mikrotik\n* ''on-logout / on-down'' is helper to add custome script to Mikrotik\n\n\u003Cbutton>[[Back|Hotspot System]]\u003C/button>","title":"Create PPPOE Plan","modified":"20240715043523134","modifier":"allnetteam"},
{"created":"20250218074447068","creator":"allnetteam","text":"Every rows divide by dot (.) and column divide by comma ( , )\n\nBased by \u003Ca href=\"https://getbootstrap.com/docs/3.4/css/#grid\">Bootstrap Theme\u003C/a>, every cols have 12 column.\n\nif value is 12.7,5.12 then it will have 3 rows and second rows have 2 column\n\n# use all 12 columns\n# have 2 columns, divided by 7 columns and 5 columns\n# use all 12 columns\n\n\n!! 12.7,5.12\n```\n┌──────────────────────┐\n│       12 cols        │\n│                      │\n├────────────┬─────────┤\n│   7 cols   │ 5 cols  │\n│            │         │\n├────────────┴─────────┤\n│       12 cols        │\n│                      │\n└──────────────────────┘\n```\n\n!! 12.6,6.12\n\n\n```\n┌──────────────────────┐\n│       12 cols        │\n│                      │\n├──────────┬───────────┤\n│  6 cols  │  6 cols   │\n│          │           │\n├──────────┴───────────┤\n│       12 cols        │\n│                      │\n└──────────────────────┘\n```\n\n!! 12.4,8.12\n\n\n```\n┌──────────────────────┐\n│       12 cols        │\n│                      │\n├──────┬───────────────┤\n│4 cols│    8 cols     │\n│      │               │\n├──────┴───────────────┤\n│       12 cols        │\n│                      │\n└──────────────────────┘\n```\n\n!! 12.7,5.4,8.6,6.12\n\n\n```\n┌──────────────────────┐\n│       12 cols        │\n│                      │\n├────────────┬─────────┤\n│   7 cols   │ 5 cols  │\n│            │         │\n├──────┬─────┴─────────┤\n│4 cols│    8 cols     │\n│      │               │\n├──────┴───┬───────────┤\n│  6 cols  │  6 cols   │\n│          │           │\n├──────────┴───────────┤\n│       12 cols        │\n│                      │\n└──────────────────────┘\n```\n","title":"Dashboard Structure","modified":"20250218080233797","modifier":"allnetteam"},
{"created":"20240712072200400","creator":"allnetteam","text":"! ''Congratulations!!''\n\nNow you already install ALLNet Billing\n\nWhere to go now?\n\nConfigure The ALLNet Billing as you need, go to [ext[Settings|../index.php?_route=settings/app]], after that got to [ext[Localisation|../index.php?_route=settings/localisation]].\n\nAfter that, which one do you want to accomplish?\n\n*\u003Cbutton>[[Hotspot System]]\u003C/button> ^^most user just need this^^\n** Voucher system with or without Registration\u003Cbr>(''Activation at allnetbilling page'')\n** Payment Gateway only with Registration\n** Prepaid and or Postpaid system\n** ''1 plan for 1 router''\n\n* \u003Cbutton>[[PPPOE System]]\u003C/button>\n** Voucher system and or Payment Gateway\n** ''Only with Registration''\n** Prepaid and or Postpaid system\n**  ''1 plan for 1 router''\n\n* \u003Cbutton>[[Radius System with Mysql]]\u003C/button> ^^Advanced^^\n** Hotspot and or PPPOE\n** Voucher system with or without Registration \u003Cbr>(''Activation at allnetbilling page'')\n** Payment Gateway only with Registration\n** Prepaid and or Postpaid system\n** PPPOE only with Registration\n** ''1 Plan for Multiple Router''\n\n* \u003Cbutton>[[Integrated Radius System]]\u003C/button> ^^Easy^^\n** Hotspot and or PPPOE\n** Voucher system with or without Registration\u003Cbr>(''Activation or Direct voucher login at Mikrotik Login page'')\n** Payment Gateway only with Registration\n** Prepaid and or Postpaid system\n** PPPOE only with Registration\n** ''1 Plan for Multiple Router''\n\nAlthough all the system can run together, you need to setup one by one\n\nVoucher or Payment Gateway, just follow above tutorial, it will Guide you.\n\n\u003C\u003C\u003C\nIf you like ALLNet Billing, don't forget to [ext[donate|index.php?_route=community]] some of your profits to this project.\n\u003C\u003C\u003C\n\n!! Other Features\n\n* [[Dashboard Structure]]\n* [[Additional Billing]]\n* [[Creating Theme|https://github.com/allnetbilling/allnet-billing/wiki/Themes]]\n* [[Reminder with payment link]]\n* [[User Notification Text]]\n* [[API Rest Documentation]]\n\n!! Mikrotik Template\n\n* [[Simple Template|https://github.com/allnetbilling/allnet-billing-mikrotik-login-template/]]\n* [[Redirect Directly to ALLNet Billing|https://github.com/agstrxyz/allnetbilling-login-hotspot]]\n","title":"GettingStarted","modified":"20250311074952298","modifier":"allnetteam","tags":"","type":"text/vnd.tiddlywiki"},
{"created":"20240712084946106","creator":"allnetteam","text":"!Step to create Hotspot Plan\n\nHotspot System based on the Mikrotik Feature inside `IP > Hotspot`, You need to configure it first.\n\n\n!! For [[Radius System with Mysql]]\n \n# [[Add NAS]]\n# [[Create Bandwidth Plan]]\n# [[Create Hotspot Plan]]\n\n!! For [[Integrated Radius System]]\n\n# [[Create Bandwidth Plan]]\n# [[Create Hotspot Plan]]\n\n!! Without Radius\n\n# [[Add Mikrotik]]\n# [[Create Bandwidth Plan]]\n# [[Create Hotspot Plan]]\n\nAfter That, how do you want to sell Internet Plan?\n\n* Customer self services buy internet using Payment Gateway\n* Customer Buy Voucher and activate it at ALLNet Billing\n\nWhich one do you want?\n\n\u003Cbutton>[[Payment Gateway]]\u003C/button> \u003Cbutton>[[Internet Voucher]]\u003C/button>\n","title":"Hotspot System","modified":"20240714053827041","modifier":"allnetteam"},
{"created":"20240712080714532","creator":"allnetteam","text":"Radius System is complicated, But with [[REST API|https://www.google.com/search?q=REST+API]] is Easy enough.\n\nFreeradius REST API is configuration to make Freeradius talk to ALLNet Billing via HTTP Connection, configuration is more simple.\n\nWith Freeradius REST, it will use current ALLNet Billing Core, and you don't need IP Public for Mikrotik, but still need static IP, as the IP need to be registered to clients.conf, or [[allow all IP|https://serverfault.com/questions/114780/is-there-a-way-to-allow-all-external-ip-connections-in-freeradius]], but be careful.\n\n\u003C\u003C\u003C\nFor now is only support PAP Authentication, i am still working with CHAP\n\u003C\u003C\u003C\n\n\u003C\u003C\u003C\nPassword can be sniffed when login to Mikrotik if using PAP\n\u003C\u003C\u003C\n\n```\n                     \n     ┌──────────────┐\n     │  ALLNET BILLING  │\n     └──────────────┘\n             ▲       \n             │       \n             ▼       \n     ┌──────────────┐\n     │  Freeradius  │\n     └──────────────┘\n             ▲       \n             │       \n             ▼       \n       ┌──────────┐  \n       │ Mikrotik │  \n       └──────────┘  \n```\n\n!! Installing freeradius\n\nThis Tutorial tested in Ubuntu 20.04 and 22.04\n\n`apt-get -y install freeradius freeradius-rest`\n\nedit clients.conf\n\n`nano /etc/freeradius/3.0/clients.conf`\n\nAdd your Mikrotik IP or your Public IP, this is example\n\n\u003C\u003C\u003C\neverytime you add/edit Client, restart freeradius\n\u003C\u003C\u003C\n\n```\nclient myRouterA {\n\tipaddr\t\t= 10.0.1.0/24\n\tsecret\t\t= verysecret\n}\n\nclient myRouterB {\n\tipaddr\t\t= 10.0.2.0/24\n\tsecret\t\t= secretvery\n}\n```\n\nor allow all IP\n\n```\n# All IPv4\nclient 0.0.0.0/0 {\n  secret = verysecret\n}\n# All IPv6\nclient ::/0 {\n  secret = secretvery\n}\n```\n\nCreate rest Configuration\n\n`nano /etc/freeradius/3.0/mods-enabled/rest`\n\nuse this configuration, change allnetbilling.domain with your domain, copy all this configuration\n\n```\nrest {\n    tls {\n        # ca_file = ${certdir}/ca.pem\n\t\t# ca_info_file = ${certdir}/cacert_bundle.pem\n\t\t# ca_path = ${certdir}\n        check_cert = no\n        check_cert_cn = no\n    }\n\tconnect_uri = \"https://allnetbilling.domain/radius.php\"\n\n\tauthenticate {\n\t\turi = \"${..connect_uri}?action=authenticate\"\n        method = 'post'\n        body = 'post'\n        data = \"username=%{urlquote:%{User-Name}}&password=%{urlquote:%{User-Password}}&CHAPchallenge=%{urlquote:%{CHAP-Challenge}}&CHAPassword=%{urlquote:%{CHAP-Password}}&nasid=%{urlquote:%{NAS-Identifier}}&realm=%{urlquote:%{Mikrotik-Realm}}&macAddr=%{urlquote:%{Calling-Station-Id}}&nasip=%{urlquote:%{NAS-IP-Address}}\"\n\t\ttls = ${..tls}\n\t}\n\n    authorize {\n            uri = \"${..connect_uri}?action=authorize\"\n            method = 'post'\n            body = 'post'\n            data = \"username=%{urlquote:%{User-Name}}&password=%{urlquote:%{User-Password}}&CHAPchallenge=%{urlquote:%{CHAP-Challenge}}&CHAPassword=%{urlquote:%{CHAP-Password}}&nasid=%{urlquote:%{NAS-Identifier}}&realm=%{urlquote:%{Mikrotik-Realm}}&macAddr=%{urlquote:%{Calling-Station-Id}}&nasip=%{urlquote:%{NAS-IP-Address}}\"\n\t\ttls = ${..tls}\n    }\n\n\taccounting {\n\t\turi = \"${..connect_uri}?action=accounting\"\n\t\tmethod = 'post'\n\t\tbody = 'post'\n        data = \"username=%{urlquote:%{User-Name}}&nasIpAddress=%{urlquote:%{NAS-IP-Address}}&realm=%{urlquote:%{Mikrotik-Realm}}&nasid=%{urlquote:%{NAS-Identifier}}\\\n&acctSessionId=%{urlquote:%{Acct-Session-Id}}&macAddr=%{urlquote:%{Calling-Station-Id}}&acctSessionTime=%{urlquote:%{Acct-Session-Time}}\\\n&acctInputOctets=%{urlquote:%{Acct-Input-Octets}}&acctOutputOctets=%{urlquote:%{Acct-Output-Octets}}\\\n&acctInputGigawords=%{urlquote:%{Acct-Input-Gigawords}}&acctOutputGigawords=%{urlquote:%{Acct-Output-Gigawords}}\\\n&acctInputPackets=%{urlquote:%{Acct-Input-Packets}}&acctOutputPackets=%{urlquote:%{Acct-Output-Packets}}\\\n&nasPortId=%{urlquote:%{NAS-Port-Id}}&framedIPAddress=%{urlquote:%{Framed-IP-Address}}\\\n&sessionTimeout=%{urlquote:%{Session-Timeout}}&framedIPNetmask=%{urlquote:%{Framed-IP-Netmask}}\\\n&acctStatusType=%{urlquote:%{Acct-Status-Type}}&nasPortType=%{urlquote:%{NAS-Port-Type}}\"\n\t\ttls = ${..tls}\n\t}\n\n    post-auth {\n        uri = \"${..connect_uri}?action=post-auth\"\n        method = 'post'\n        body = 'post'\n        data = \"username=%{urlquote:%{User-Name}}\"\n\t\ttls = ${..tls}\n    }\n\n\tpool {\n\t\tstart = ${thread[pool].start_servers}\n\t\tmin = ${thread[pool].min_spare_servers}\n\t\tmax = ${thread[pool].max_servers}\n\t\tspare = ${thread[pool].max_spare_servers}\n\t\tuses = 0\n\t\tretry_delay = 30\n\t\tlifetime = 0\n\t\tidle_timeout = 60\n\t}\n}\n```\n\nedit sites\n\n`nano /etc/freeradius/3.0/sites-enabled/default `\n\nConfigure just like this, don't delete others, just set what it need\n\n```\nauthorize {\n#   filter_username\n#\tfilter_password\n#\tpreprocess\n#\toperator-name\n#\tcui\n#\tauth_log\n\trest\n    if (ok) {\n        update control {\n            Auth-Type := rest\n        }\n    }\n\n    ....\n}\n\nauthenticate {\n    Auth-Type rest {\n        rest {\n            updated = 1\n        }\n        if (updated) {\n            ok\n        }\n    }\n\tAuth-Type rest {\n\t\trest\n\t}\n\n    ....\n}\n\naccounting {\n\tdetail\n\trest\n\n    ....\n}\n\nsession {\n\tradutmp\n    \n    ....\n}\n\npost-auth {\n\tif (reply:Group-Name) {\n        update control {\n            &Group := \"%{reply:Group-Name}\"\n        }\n    }\n    if (reply:Mikrotik-Rate-Limit) {\n        update reply {\n            Mikrotik-Rate-Limit := \"%{reply:Mikrotik-Rate-Limit}\"\n        }\n    }\n    if (reply:Expiration) {\n        update reply {\n            Expiration := \"%{reply:Expiration}\"\n        }\n    }\n\tupdate {\n\t\t&reply: += &session-state:\n\t}\n}\n```\n\nrestart services\n\n`systemctl restart freeradius.service`\n\n!! DEBUG\n\nTo check if someting wrong, stop freeradius\n\n`systemctl stop freeradius.service`\n\nActivate log in Mikrotik\n\n`/system logging add topics=radius,debug action=memory`\n\nrun radius just like this\n\n`freeradius -X`\n\nthen try to login\n\n!! Next\n\nGo to [ext[Settings|../index.php?_route=settings/app]] and Enable Radius.\n\nYou want to sell Hotspot or PPPOE?\n\n * [[Hotspot System]]\n * [[PPPOE System]]\n","title":"Integrated Radius System","modified":"20241009085747300","modifier":"allnetteam","tags":"[[radius rest]]"},
{"created":"20240714052949493","creator":"allnetteam","text":"There's 3 Voucher version\n\n!! With customer registration\n\nALLNet Billing Voucher is to activate internet plan for an account.\n\nCustomer must register, then buy Voucher from some place you sell, then activate the voucher. \n\n[ext[Create Voucher|../?_route=plan/voucher]] based your already created Plan.\n\n!! Without Registration\n\nIs not actually without registration, it will register only username, and the voucher will be password, From Hotspot Login, customer need to redirect to ALLNet Billing, then activate the voucher, then they can login for Internet.\n\n# Go to [ext[Settings|../?_route=settings/app]]\n# Disable Registration at Voucher Settings\n# [ext[Create Voucher|../?_route=plan/voucher]] based your already created Plan.\n\n\n!! Voucher direct login\n\nFor Voucher directly login from Mikrotik Hotspot Login without activation, you need to use [[Integrated Radius System]], customer no need to activate voucher, as long username same as password it will detected as Voucher, automatically activate the voucher\n\nJust [ext[Create Voucher|../?_route=plan/voucher]] based your already created Plan. This will run together with ALLNet Billing Customer system, you can sell voucher directly, with or without Registration system.\n\nOnly Plan with Radius selected as Router will be activated as Voucher.\n","title":"Internet Voucher","modified":"20240715063639438","modifier":"allnetteam"},
{"created":"20240713063147852","creator":"allnetteam","text":"i don't have any Template\n\nthis is example:\nhttps://github.com/allnetbilling/allnet-billing-mikrotik-login-template\n\nCustomer need to register at ALLNet Billing, so you need to add link on Mikrotik Login page, just add anywhere this link on Mikrotik Login page, this link, change domain to your server IP or Domain.\n\n```\n\u003Ca href=\"http://domain/?allnet-mac=$(mac-esc)&allnet-ip=$(ip)&allnet-router=1\" class=\"btn btn-block btn-success\">Register\u003Ca>\n```\n\n`?allnet-mac=$(mac-esc)&allnet-ip=$(ip)&allnet-router=1` this will help user to auto login from User Dashboard\n\n''allnet-router ''is Optional, See mikrotik ID in `Networks -> Routers`, it will make Customer show only Package for that Router/Location only, if you have multiple location","title":"Mikrotik Login Template","modified":"20240713063350641","modifier":"allnetteam"},
{"created":"20240713062428411","creator":"allnetteam","text":"Customer just self services, Customer register to get an account, Order the plan and automatically activate for the account.\n\nThen customer just login to Internet with account they register it.\n\nThis need Payment Gateway, ALLNet Billing can support multiple Payment Gateway.\n\nGo to [ext[Plugin Manager|../?_route=pluginmanager]], and install Payment Gateway you need\n\nThen go to [ext[Payment Gateway Settings|../?_route=paymentgateway]], You can activate Multiple Payment Gateway, configure it based the payment Gateway settings, and add it to walled Garden.\n\nDone, you now can selling Internet services.\n\nbut maybe you need to configure [[Mikrotik Login Template]], ","title":"Payment Gateway","modified":"20240714053605590","modifier":"allnetteam"},
{"created":"20240713062019848","creator":"allnetteam","text":"!Step to create PPPOE Plan\n\nPPPOE System based on the Mikrotik Feature inside `PPP`\n\n\n!! For Radius System with Mysql\n \n# [[Add NAS]]\n# [ext[Create Pool|../?_route=pool/list]]\n# [[Create Bandwidth Plan]]\n# [[Create PPPOE Plan]]\n\n!! Integrated Radius System\n\n# [ext[Create Pool|../?_route=pool/list]]\n# [[Create Bandwidth Plan]]\n# [[Create PPPOE Plan]]\n\n!! Without Radius\n\n# [[Add Mikrotik]]\n# [ext[Create Pool|../?_route=pool/list]]\n# [[Create Bandwidth Plan]]\n# [[Create PPPOE Plan]]\n\nAfter That, how do you want to sell Internet Plan?\n\n* Customer self services buy internet using Payment Gateway\n* Customer Buy Voucher and activate it at ALLNet Billing\n\nWhich one do you want?\n\n\u003Cbutton>[[Payment Gateway]]\u003C/button> \u003Cbutton>[[Voucher]]\u003C/button>\n","title":"PPPOE System","modified":"20240715043559596","modifier":"allnetteam"},
{"created":"20240712074107108","creator":"allnetteam","text":"Radius System is complicated, ALLNet Billing will connect to Radius Database, and Freeradius will check from that database\n\n\n```\n     ┌──────────────┐\n     │  ALLNET BILLING  │\n     └──────────────┘\n             ▲       \n             │       \n             ▼       \n     ┌──────────────┐\n     │   Database   │\n     │ Mysql/MariaDB│\n     └──────────────┘\n             ▲       \n             │       \n             ▼       \n     ┌──────────────┐\n     │  Freeradius  │\n     └──────────────┘\n             ▲       \n             │       \n             ▼       \n       ┌──────────┐  \n       │ Mikrotik │  \n       └──────────┘  \n```\n\nDid you check Radius System when install ALLNet Billing?\n\nIf no, then you must import Radius Database, download [[SQL File|https://raw.githubusercontent.com/allnetbilling/allnet-billing/master/install/radius.sql]], import it by command line or using PHPMyAdmin.\n\nIf yes, or done import the SQL, Go to [ext[Settings|../index.php?_route=settings/app]] and Enable Radius.\n\nHave you install Freeradius? if no, then follow [[this Guide|https://github.com/allnetbilling/allnet-billing/wiki/FreeRadius]] to install Freeradius with Mysql, The Tutorial is not good enough, you need to fix it yourself.\n\nYou want to sell Hotspot or PPPOE?\n\n\u003Cbutton>[[Hotspot System]]\u003C/button>\n\u003Cbutton>[[PPPOE System]]\u003C/button>\n","title":"Radius System with Mysql","modified":"20240713053714715","modifier":"allnetteam","tags":"radius"},
{"created":"20241105015644306","creator":"allnetteam","text":"When sending Reminder or Expired notification, you can add payment link so customer can directly click link to pay\n\n\nAdd `[[payment_link]]` and use your domain url before that\n\nEXAMPLE\n\n```\nhttps://nuxbill.allnetteam.com/[[payment_link]]\n```\n\n```\nhttps://nuxbill.allnetteam.com/folder/[[payment_link]]\n```\n```\nhttps://192.168.88.2/[[payment_link]]\n```\n```\nhttps://192.168.88.2/folder/[[payment_link]]\n```\n\nWhen customer get notification, can click the link to pay directly, link will be expired after 24 hours after the link created. and customer need to login again.\n\n!! INVOICE LINK\n\nAdd `[[invoice_link]]` and use your domain url before that\n\nEXAMPLE\n\n```\nhttps://nuxbill.allnetteam.com/[[invoice_link]]\n```\n\n```\nhttps://nuxbill.allnetteam.com/folder/[[invoice_link]]\n```\n```\nhttps://192.168.88.2/[[invoice_link]]\n```\n```\nhttps://192.168.88.2/folder/[[invoice_link]]\n```\n\n\n\n\u003C\u003C\u003C\nMostly script run from command line, script cannot detect domain used from billing\n\u003C\u003C\u003C\n","title":"Reminder with payment link","modified":"20250317074300132","modifier":"allnetteam"},
{"created":"20250311045849165","creator":"allnetteam","text":"\n\u003C\u003C\u003C\nsettings >> User Notification \n\u003C\u003C\u003C\n\nFor Reminder and Expired Message, you can send different message for PPPOE and HOTSPOt, use `\u003Cdivider>` to create different message, above `\u003Cdivider>` for Hotspot, and below `\u003Cdivider>` for PPPOE\n\nExample:\n\n```\nHello [[name]], \nyour Hotspot package *[[package]]* will be expired in 7 days.\n[[package]] [[price]] \n[[bills]]\n\u003Cdivider>\nHello [[name]], \nyour PPPOE package *[[package]]* will be expired in 7 days.\n[[package]] [[price]] \n[[bills]]\n```","title":"User Notification Text","modified":"20250311052731156","modifier":"allnetteam"}
